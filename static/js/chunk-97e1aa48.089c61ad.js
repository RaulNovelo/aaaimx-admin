(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-97e1aa48"],{"309b":function(e,t,n){"use strict";n.r(t);var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Detail",{attrs:{"is-edit":!1,namespace:"Certificate"}})},r=[],i=n("4817"),a={name:"CreateForm",components:{Detail:i["a"]}},o=a,l=n("2877"),c=Object(l["a"])(o,s,r,!1,null,null,null);t["default"]=c.exports},"407f":function(e,t,n){"use strict";var s={data:function(){return{loading:!1,searching:!1}},methods:{loadingFullPage:function(){return this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"})}}},r=s,i=n("532b"),a=void 0,o={props:{namespace:{type:String,default:""},isEdit:{type:Boolean,default:!1}},mixins:[r],created:function(){this.$store.commit("app/SET_STEPS",i["a"])},methods:{validateRequire:function(e,t,n){""===t?(a.$message({message:e.field+" is required",type:"error"}),n(new Error("Required field"))):n()},handleSave:function(e){this.$notify({title:" ".concat(this.isEdit?"Updated":"Created"),dangerouslyUseHTMLString:!0,message:e,type:"success",duration:2e3})},handleError:function(){this.$message({message:"Something went wrong:( Try again",type:"error"})},handleDelete:function(){this.$message({dangerouslyUseHTMLString:!0,message:"".concat(this.namespace," was sucessfully deleted"),type:"success",showClose:!0,duration:2e3})},validateUrl:function(e,t,n){t?validURL(t)?n():(a.$message({message:"Invalid URL format",type:"error"}),n(new Error("Invalid URL"))):n()}}};t["a"]=o},4817:function(e,t,n){"use strict";var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"createPost-container"},[n("el-form",{ref:"postForm",staticClass:"form-container",attrs:{model:e.postForm,rules:e.rules},on:{submit:function(e){return e.preventDefault(),(!1)(e)}}},[n("sticky",{attrs:{"z-index":10,"class-name":"sub-navbar "+e.postForm.active}},[e.isEdit?n("Status",{attrs:{labels:["Published","Draft"]},model:{value:e.postForm.published,callback:function(t){e.$set(e.postForm,"published",t)},expression:"postForm.published"}}):e._e(),e._v(" "),e.isEdit?n("QR",{model:{value:e.postForm.QR,callback:function(t){e.$set(e.postForm,"QR",t)},expression:"postForm.QR"}}):e._e(),e._v(" "),n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"margin-left":"10px"},attrs:{type:"success"},domProps:{textContent:e._s(e.isEdit?"Save changes":"Save")},on:{click:e.submitForm}}),e._v(" "),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"Send certificate by email",placement:"top"}},[e.isEdit?n("el-button",{attrs:{type:"secondary",icon:"people"},on:{click:function(t){return e.sendEmail(e.postForm)}}},[n("svg-icon",{attrs:{"icon-class":"guide"}})],1):e._e()],1)],1),e._v(" "),n("div",{staticClass:"createPost-main-container"},[n("el-row",[n("el-col",{attrs:{span:24}},[n("div",{staticClass:"postInfo-container"},[n("el-row",[n("el-col",{attrs:{span:12,xs:24}},[n("Upload",{directives:[{name:"show",rawName:"v-show",value:e.isEdit,expression:"isEdit"}],model:{value:e.postForm.file,callback:function(t){e.$set(e.postForm,"file",t)},expression:"postForm.file"}})],1),e._v(" "),n("el-col",{attrs:{span:12,xs:24}},[e.isEdit?n("el-form-item",{staticClass:"postInfo-container-item",attrs:{label:"ID:",prop:"uuid"}},[n("el-input",{attrs:{value:e.postForm.uuid,disabled:"",type:"text"}},[n("el-button",{attrs:{slot:"append",type:"success",icon:"el-icon-document"},on:{click:function(t){return e.handleCopy(e.postForm.uuid,t,"ID")}},slot:"append"},[e._v("Copy")])],1)],1):e._e(),e._v(" "),n("el-form-item",{staticClass:"postInfo-container-item",attrs:{label:"Facilitator:",prop:"to"}},[n("el-input",{attrs:{placeholder:"NOMBRE(S) APPELLIDO(S)",type:"text"},model:{value:e.postForm.to,callback:function(t){e.$set(e.postForm,"to",t)},expression:"postForm.to"}})],1),e._v(" "),n("el-form-item",{staticClass:"postInfo-container-item",attrs:{label:"Type:",prop:"type"}},[n("br"),e._v(" "),n("el-select",{attrs:{filterable:"","allow-create":"",placeholder:"Select type"},model:{value:e.postForm.type,callback:function(t){e.$set(e.postForm,"type",t)},expression:"postForm.type"}},e._l(e.types,(function(e){return n("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1),e._v(" "),n("el-col",{attrs:{span:12,xs:24}},[n("el-form-item",{staticClass:"postInfo-container-item",attrs:{label:"Event:",prop:"event"}},[n("br"),e._v(" "),n("el-select",{attrs:{filterable:"",placeholder:"Select event"},model:{value:e.postForm.event,callback:function(t){e.$set(e.postForm,"event",t)},expression:"postForm.event"}},e._l(e.$store.getters.events,(function(e){return n("el-option",{key:e.title,attrs:{label:e.title,value:e.title}})})),1)],1),e._v(" "),n("el-form-item",{attrs:{prop:"description"}},[n("el-input",{attrs:{type:"textarea",rows:5,placeholder:"Description"},model:{value:e.postForm.description,callback:function(t){e.$set(e.postForm,"description",t)},expression:"postForm.description"}})],1)],1),e._v(" "),n("el-col",{directives:[{name:"show",rawName:"v-show",value:e.isEdit,expression:"isEdit"}],attrs:{span:24,xs:24}},[n("aside",[n("h2",[e._v("Upload file (FTP)")]),e._v(" "),n("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.postForm.file,expression:"postForm.file"}],staticClass:"postInfo-container-item",attrs:{label:"Currently:"}},[n("a",{staticClass:"link-type",attrs:{target:"_blank",href:e.postForm.file}},[n("svg-icon",{attrs:{"icon-class":"link"}})],1)]),e._v(" "),n("el-form-item",{staticClass:"postInfo-container-item",attrs:{label:"Folder:",prop:"upload"}},[n("br"),e._v(" "),n("el-select",{attrs:{filterable:"",clearable:"",placeholder:"Select folder"},model:{value:e.postForm.upload,callback:function(t){e.$set(e.postForm,"upload",t)},expression:"postForm.upload"}},e._l(e.folders,(function(e){return n("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),e._v(" "),n("el-form-item",{staticClass:"postInfo-container-item",attrs:{label:"Change:",prop:"file"}},[n("input",{ref:"file",attrs:{type:"file",accept:"image/png, image/jpeg",id:"file"}})]),e._v(" "),e.isEdit?n("el-button",{attrs:{type:"warning",icon:"el-icon-upload"},on:{click:function(t){return e.changeFile(e.postForm.uuid)}}},[e._v("Upload file")]):e._e()],1)])],1)],1)])],1)],1)],1)],1)},r=[],i=(n("386d"),n("96cf"),n("3b8d")),a=n("db72"),o=n("2f62"),l=n("616f"),c=(n("6d70"),{to:[{required:!0,message:"Please enter facilitator",trigger:"blur"}],type:[{required:!0,message:"Please input type",trigger:["blur","change"]}]}),u=n("407f"),p=n("f168"),d=n("8eff"),m={type:"RECOGNITION",description:"",published:!1,to:"",QR:"",file:""},f={name:"CertificateDetail",mixins:[u["a"],d["a"],p["a"]],components:{Status:function(){return n.e("chunk-2d0aeb74").then(n.bind(null,"0af3"))},QR:function(){return n.e("chunk-2d0c1b28").then(n.bind(null,"46c3"))},Upload:function(){return n.e("chunk-5d0f1156").then(n.bind(null,"e955"))},MDinput:function(){return n.e("chunk-6790f463").then(n.bind(null,"1aba"))},Sticky:function(){return n.e("chunk-2d210590").then(n.bind(null,"b804"))}},data:function(){return{loading:!1,rules:c,uploadTo:"",tempRoute:{},folders:[],photo:"",id:null}},computed:Object(a["a"])({},Object(o["c"])("certificates",["postForm","types"])),created:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(l["f"])();case 2:t=e.sent,this.folders=t.folders.filter((function(e){return-1===e.search(/\./)})),this.isEdit?(this.id=this.$route.params&&this.$route.params.id,this.fetchData(this.id)):this.$store.commit("certificates/SET_CERT",m),this.tempRoute=Object.assign({},this.$route);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{fetchData:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=this.loadingFullPage(),e.prev=1,e.next=4,Object(l["b"])(t);case 4:s=e.sent,this.$store.commit("certificates/SET_CERT",s),e.next=10;break;case 8:e.prev=8,e.t0=e["catch"](1);case 10:return e.prev=10,n.close(),e.finish(10);case 13:case"end":return e.stop()}}),e,this,[[1,8,10,13]])})));function t(t){return e.apply(this,arguments)}return t}(),changeFile:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n,s,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(r in n=this.loadingFullPage(),s=new FormData,e.prev=2,this.$refs.file.files.length?s.append("file",this.$refs.file.files[0]):delete this.postForm.file,this.postForm)s.append(r,this.postForm[r]);return e.next=7,Object(l["i"])(t,s);case 7:e.sent,e.next=12;break;case 10:e.prev=10,e.t0=e["catch"](2);case 12:return e.prev=12,n.close(),e.finish(12);case 15:case"end":return e.stop()}}),e,this,[[2,10,12,15]])})));function t(t){return e.apply(this,arguments)}return t}(),submitForm:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$refs.postForm.validate(function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(n){var s,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!n){e.next=26;break}if(s=t.loadingFullPage(),e.prev=2,!t.isEdit){e.next=9;break}return e.next=6,Object(l["h"])(t.id,t.postForm);case 6:r=e.sent,e.next=12;break;case 9:return e.next=11,Object(l["a"])(t.postForm);case 11:r=e.sent;case 12:t.handleSave("".concat(t.namespace," <b>").concat(t.postForm.uuid,"</b> was sucessfully saved")),t.isEdit&&t.fetchData(t.id),t.$refs.file.value="",t.$router.push("/certificates/"+r.uuid),e.next=21;break;case 18:e.prev=18,e.t0=e["catch"](2),t.handleError();case 21:return e.prev=21,s.close(),e.finish(21);case 24:e.next=27;break;case 26:return e.abrupt("return",!1);case 27:case"end":return e.stop()}}),e,null,[[2,18,21,24]])})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),deleteCert:function(){}}},h=f,v=n("2877"),b=Object(v["a"])(h,s,r,!1,null,null,null);t["a"]=b.exports},"532b":function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return r}));var s=[{element:".filter-container",popover:{title:"Table filters",description:"Filter by name, title, status or some important field. Also navigate to <b>Create page</b> to register new item.",position:"bottom"}},{element:".el-table",popover:{title:"Table",description:"Resources, items, list, result of filters applied.",position:"top"}},{element:".el-select--mini",popover:{title:"Quick actions",description:"Actions to alter selected rows. Such us delete multiple items or change some field. First select rows, then choose an option & click <b>Go</b> button.",position:"top"}},{element:".pagination-container",popover:{title:"Pagination",description:"Choose items quantity or page will be listed.",position:"top"}}],r=[{element:".postInfo-container",popover:{title:"Create/Update Form",description:'Edit or enter each field and click <b>Save/Save changes</b>. <br>\n        <span style="color: red;">*</span> Indicates required field and can not be empty.\n        ',position:"top"}},{element:".el-button--success",popover:{title:"Save button",description:'Click this button when all required fields or changes are ready and wait to save into database. <br>\n      Input errors will be displayed in <span style="color: red;">red</span>.\n      \n      ',position:"left"}}]},"6d70":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));n("28a5");function s(e){try{var t=e.split("https://drive.google.com/file/d/");return t=t[1],t=t.split("/view?usp=drivesdk"),"https://drive.google.com/uc?id="+t[0]}catch(n){return""}}},"8eff":function(e,t,n){"use strict";n("a481");var s=n("db72"),r=n("bc3a"),i=n.n(r),a=n("4360"),o=n("5f87"),l=n("b444"),c=i.a.create({baseURL:"https://aaaimx-email.herokuapp.com/api",mode:"cors",credentials:"same-origin",timeout:4e4,headers:{"Content-Type":"application/json;"}});c.interceptors.request.use((function(e){return a["a"].getters.token&&(e.headers.Authorization="Bearer "+Object(o["c"])()),e}),(function(e){return Promise.reject(e)})),c.interceptors.response.use((function(e){return 200!==e.status&&201!==e.status&&204!==e.status?(401!==e.status&&403!==e.status||Object(l["b"])(),Promise.reject(new Error(e.message||"Error"))):e.data}),(function(e){var t=e.response,n=e.message;return Object(l["a"])(n),401!==t.status&&403!==t.status||Object(l["b"])(),Promise.reject(t)}));var u=c;function p(e){return u({url:"/emails/",method:"POST",data:e})}var d=n("616f"),m={methods:{publish:function(e,t){var n=this;e.loading=!0,Object(d["g"])(e.uuid,t).then((function(s){n.$message({message:"Certificate status changed",type:"success"}),e.published=t,e.loading=!1}),(function(t){e.loading=!1,n.$message({message:"Something went wrong:( Try Again!",type:"error"})}))},sendEmail:function(e){var t=this;this.$prompt("Please input an e-mail","Send by email",{confirmButtonText:"OK",cancelButtonText:"Cancel",inputValue:"rnovelo.cruz98@gmail.com",inputPattern:/[\w!#$%&'*+/=?^_`{|}~-]+(?:\.[\w!#$%&'*+/=?^_`{|}~-]+)*@(?:[\w](?:[\w-]*[\w])?\.)+[\w](?:[\w-]*[\w])?/,inputErrorMessage:"Invalid Email"}).then((function(n){var r=n.value;e.sending=!0,p({subject:"CERTIFICATE OF "+e.type,message:"CERTIFICATE OF ".concat(e.type,": ").concat(e.to),sent:1,context:Object(s["a"])({},e,{email:r,thumbnail:e.file.replace("download","preview")}),recipients:[r],template:"CERTIFICATE"}).then((function(n){e.sending=!1,t.$notify({title:"Success",message:"Certificate send",type:"success",duration:2e3})}),(function(e){}))})).catch((function(){e.sending=!1,t.$message({type:"info",message:"Email canceled"})}))}}};t["a"]=m}}]);