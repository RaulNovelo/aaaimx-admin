(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-55b5aaea"],{"1c1f":function(e,t,s){"use strict";var o={methods:{compare:function(e,t){return e.position>t.position?1:-1}}};t["a"]=o},"407f":function(e,t,s){"use strict";var o={data:function(){return{loading:!1,searching:!1}},methods:{loadingFullPage:function(){return this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"})}}},r=o,a=void 0,n={props:{namespace:{type:String,default:""},isEdit:{type:Boolean,default:!1}},mixins:[r],methods:{validateRequire:function(e,t,s){""===t?(a.$message({message:e.field+" is required",type:"error"}),s(new Error("Required field"))):s()},handleSave:function(e){this.$notify({title:" ".concat(this.isEdit?"Updated":"Created"),dangerouslyUseHTMLString:!0,message:e,type:"success",duration:2e3})},handleError:function(){this.$message({message:"Something went wrong:( Try again",type:"error"})},handleDelete:function(){this.$message({dangerouslyUseHTMLString:!0,message:"".concat(this.namespace," was sucessfully deleted"),type:"success",showClose:!0,duration:2e3})},validateUrl:function(e,t,s){t?validURL(t)?s():(a.$message({message:"Invalid URL format",type:"error"}),s(new Error("Invalid URL"))):s()}}};t["a"]=n},"5e25":function(e,t,s){"use strict";s.r(t);var o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Detail",{attrs:{"is-edit":!1,namespace:"Research"}})},r=[],a=s("abd9"),n={name:"CreateForm",components:{Detail:a["a"]}},i=n,l=s("2877"),c=Object(l["a"])(i,o,r,!1,null,null,null);t["default"]=c.exports},abd9:function(e,t,s){"use strict";var o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"createPost-container"},[s("el-form",{ref:"postForm",staticClass:"form-container",attrs:{model:e.postForm,rules:e.rules},on:{submit:function(e){return e.preventDefault(),(!1)(e)}}},[s("sticky",{attrs:{"z-index":10,"class-name":"sub-navbar "+e.postForm.type}},[s("TypeDropdown",{model:{value:e.postForm.type,callback:function(t){e.$set(e.postForm,"type",t)},expression:"postForm.type"}}),e._v(" "),s("BannerUrlDropdown",{model:{value:e.postForm.link,callback:function(t){e.$set(e.postForm,"link",t)},expression:"postForm.link"}}),e._v(" "),s("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"margin-left":"10px"},attrs:{type:"success"},domProps:{textContent:e._s(e.isEdit?"Save changes":"Save")},on:{click:e.submitForm}}),e._v(" "),s("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"},{name:"show",rawName:"v-show",value:e.isEdit,expression:"isEdit"}],attrs:{type:"danger"},on:{click:e.deleteResearch}},[e._v("Delete")])],1),e._v(" "),s("div",{staticClass:"createPost-main-container"},[s("el-row",[s("el-col",{attrs:{span:24}},[s("div",{staticClass:"grid-content bg-purple-dark"})])],1),e._v(" "),s("el-row",[s("el-col",{attrs:{span:12}},[s("div",{staticClass:"grid-content bg-purple"})]),e._v(" "),s("el-col",{attrs:{span:12}},[s("div",{staticClass:"grid-content bg-purple-light"})])],1),e._v(" "),s("el-row",[s("el-col",{attrs:{span:24}},[s("div",{staticClass:"postInfo-container"},[s("el-row",[s("el-col",{attrs:{span:24,xs:24}},[s("el-form-item",{staticClass:"postInfo-container-item",attrs:{label:"Title:",prop:"title"}},[s("el-input",{attrs:{placeholder:"i.e: Segmentación de tumores cerebrales utilizando optimización...",type:"textarea",rows:"3"},model:{value:e.postForm.title,callback:function(t){e.$set(e.postForm,"title",t)},expression:"postForm.title"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:24,xs:24}},[s("el-form-item",{staticClass:"postInfo-container-item",attrs:{label:"Resume/Abstract:",prop:"resume"}},[s("el-input",{attrs:{placeholder:"",type:"textarea",rows:"7"},model:{value:e.postForm.resume,callback:function(t){e.$set(e.postForm,"resume",t)},expression:"postForm.resume"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:8,xs:24}},[s("el-form-item",{staticClass:"postInfo-container-item",attrs:{label:"Year:",prop:"year"}},[s("br"),e._v(" "),s("el-input",{staticClass:"filter-item",attrs:{type:"number",min:"2018",placeholder:"Year",clearable:""},model:{value:e.postForm.year,callback:function(t){e.$set(e.postForm,"year",t)},expression:"postForm.year"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:8,xs:24}},[s("el-form-item",{staticClass:"postInfo-container-item",attrs:{label:"Related projects:",prop:"projects"}},[s("br"),e._v(" "),s("el-select",{attrs:{multiple:"",filterable:"",remote:"","reserve-keyword":"","remote-method":e.fetchProjects,loading:e.searching,clearable:"",placeholder:"Search and select projects"},model:{value:e.postForm.projects,callback:function(t){e.$set(e.postForm,"projects",t)},expression:"postForm.projects"}},e._l(e.projects,(function(t){return s("el-option",{key:t.uuid,attrs:{label:t.title.slice(0,30).concat("..."),value:t.uuid}},[s("small",{staticStyle:{color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.title.slice(0,100).concat("...")))])])})),1)],1)],1),e._v(" "),s("el-col",{attrs:{span:8,xs:24}},[s("el-form-item",{staticClass:"postInfo-container-item",attrs:{label:"Áreas de interés:",prop:"lines"}},[s("br"),e._v(" "),s("el-select",{attrs:{multiple:"",placeholder:"Select interest areas"},model:{value:e.postForm.lines,callback:function(t){e.$set(e.postForm,"lines",t)},expression:"postForm.lines"}},e._l(e.lines,(function(t){return s("el-option",{key:t.id,attrs:{label:t.topic.slice(0,30).concat("..."),value:t.id}},[e._v(e._s(t.topic))])})),1),e._v(" "),s("LineModal")],1)],1),e._v(" "),s("el-col",{attrs:{span:8,xs:24}},["Thesis"==e.postForm.type?s("el-form-item",{staticClass:"postInfo-container-item",attrs:{label:"Grade:",prop:"grade"}},[s("br"),e._v(" "),s("el-input",{staticClass:"filter-item",attrs:{placeholder:"Licenciatura",clearable:""},model:{value:e.postForm.grade,callback:function(t){e.$set(e.postForm,"grade",t)},expression:"postForm.grade"}})],1):e._e()],1),e._v(" "),"Presentation"==e.postForm.type?s("el-col",{attrs:{span:24,xs:24}},[s("el-form-item",{staticClass:"postInfo-container-item",attrs:{label:"Event:",prop:"event"}},[s("br"),e._v(" "),s("el-input",{staticClass:"filter-item",attrs:{clearable:""},model:{value:e.postForm.event,callback:function(t){e.$set(e.postForm,"event",t)},expression:"postForm.event"}})],1)],1):e._e(),e._v(" "),s("el-col",{attrs:{span:12,xs:24}},["Article"==e.postForm.type?s("el-form-item",{staticClass:"postInfo-container-item",attrs:{label:"Article type:",prop:"pub_type"}},[s("el-input",{staticClass:"filter-item",attrs:{clearable:""},model:{value:e.postForm.pub_type,callback:function(t){e.$set(e.postForm,"pub_type",t)},expression:"postForm.pub_type"}})],1):e._e()],1),e._v(" "),"Article"==e.postForm.type?s("el-col",{attrs:{span:12,xs:24}},[s("el-form-item",{staticClass:"postInfo-container-item",attrs:{label:"Published in:",prop:"púb_in"}},[s("el-input",{staticClass:"filter-item",attrs:{clearable:""},model:{value:e.postForm.pub_in,callback:function(t){e.$set(e.postForm,"pub_in",t)},expression:"postForm.pub_in"}})],1)],1):e._e()],1)],1)])],1)],1)],1),e._v(" "),s("el-row",[s("el-col",{directives:[{name:"show",rawName:"v-show",value:e.isEdit,expression:"isEdit"}],attrs:{span:12,lg:12,xs:24}},[s("Authors",{attrs:{authors:e.postForm.authors,title:"Authors"}})],1),e._v(" "),s("el-col",{directives:[{name:"show",rawName:"v-show",value:"Thesis"===e.postForm.type&&e.isEdit,expression:"postForm.type === 'Thesis' && isEdit"}],attrs:{span:12,lg:12,xs:24}},[s("Advisors",{attrs:{advisors:e.postForm.advisors,title:"Advisors"}})],1)],1)],1)},r=[],a=(s("5df3"),s("ac6a"),s("55dd"),s("db72")),n=(s("61f7"),s("2f62")),i=s("896b"),l=s("24d2"),c={required:!0,message:"This field is required",trigger:"blur"},p={title:[c],year:[c],type:[c]},u=s("407f"),m=s("1c1f"),d={title:"",resume:"",year:2018,grade:"",event:"",pub_in:"",pub_type:"",type:"",link:"",lines:[],projects:[]},f={name:"ResearchDetail",mixins:[m["a"],u["a"]],components:{MDinput:function(){return s.e("chunk-6790f463").then(s.bind(null,"1aba"))},Sticky:function(){return s.e("chunk-2d210590").then(s.bind(null,"b804"))},TypeDropdown:function(){return s.e("chunk-2d21de80").then(s.bind(null,"d2fb"))},BannerUrlDropdown:function(){return s.e("chunk-76f6a8a8").then(s.bind(null,"46c3"))},LineModal:function(){return s.e("chunk-2d0e13f0").then(s.bind(null,"7a2b"))},Authors:function(){return Promise.all([s.e("chunk-70f339e8"),s.e("chunk-0bdee724")]).then(s.bind(null,"1ff4"))},Advisors:function(){return Promise.all([s.e("chunk-70f339e8"),s.e("chunk-fbd9d2f2")]).then(s.bind(null,"f9dc"))}},data:function(){return{rules:p,tempRoute:{},id:null,projects:[]}},computed:Object(a["a"])({},Object(n["c"])("members",["partners","collaborators","divisions","roles"]),{},Object(n["c"])("research",["postForm"]),{},Object(n["c"])("projects",["lines"])),created:function(){this.lines.length||this.$store.dispatch("projects/fetchLines"),this.isEdit?(this.id=this.$route.params&&this.$route.params.id,this.fetchData(this.id)):this.$store.commit("research/SET_RESEARCH_FORM",d),this.tempRoute=Object.assign({},this.$route)},methods:{fetchProjects:function(e){var t=this;this.searching=!0,Object(l["d"])({title:e}).then((function(e){console.log(e),t.projects=e.results,t.searching=!1}))},sortAuthors:function(e){return e.sort(this.compare),e},fetchData:function(e){var t=this,s=this.loadingFullPage();Object(i["b"])(e).then((function(e){e.authors.sort(t.compare),e.advisors.sort(t.compare);var o=[];e.projects.forEach((function(e){o.push(Object(l["e"])(e))})),Promise.all(o).then((function(e){t.projects=e,s.close()})),t.$store.commit("research/SET_RESEARCH_FORM",e)})).catch((function(e){s.close(),console.log(e)}))},submitForm:function(){var e=this;this.$refs.postForm.validate((function(t){if(!t)return console.log("error submit!!"),!1;var s,o=e.loadingFullPage();s=e.isEdit?Object(i["e"])(e.postForm):Object(i["a"])(e.postForm);var r=new Date(e.postForm.start),a=new Date(e.postForm.end);e.postForm.start="".concat(r.getFullYear(),"-").concat(r.getMonth(),"-").concat(r.getDate()),e.postForm.end="".concat(a.getFullYear(),"-").concat(a.getMonth(),"-").concat(a.getDate()),s.then((function(t){e.handleSave("".concat(e.namespace," <b>").concat(e.postForm.title,"</b> was sucessfully saved")),o.close(),e.isEdit||e.$store.dispatch("tagsView/delAllVisitedViews"),e.$router.push("/research/"+t.uuid)})).catch((function(e){o.close()}))}))},deleteResearch:function(){var e=this;Object(i["d"])(this.$route.params.id).then((function(t){e.handleError(),e.$store.dispatch("tagsView/delAllVisitedViews"),e.$router.push({name:"ResearchList"})}),(function(e){console.log(e)}))}}},h=f,b=s("2877"),v=Object(b["a"])(h,o,r,!1,null,null,null);t["a"]=v.exports}}]);