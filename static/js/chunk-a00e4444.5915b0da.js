(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a00e4444"],{"1ff4":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"components-container"},[n("h3",[t._v(t._s(t.title))]),t._v(" "),n("el-select",{attrs:{filterable:"",remote:"","reserve-keyword":"","remote-method":t.getData,loading:t.loading,clearable:"",placeholder:"Selector author"},model:{value:t.author,callback:function(e){t.author=e},expression:"author"}},t._l(t.options,(function(t){return n("el-option",{key:t.fullname,attrs:{label:t.fullname,value:t.id}})})),1),t._v(" "),n("el-button",{attrs:{icon:"el-icon-plus",size:"small"},on:{click:function(e){return t.addAuthor()}}},[t._v("Add author")]),t._v(" "),n("div",{staticClass:"editor-container"},[n("dnd-list",{attrs:{list1:t.authors,list2:t.list2,"list1-title":"Authors","list2-title":""}})],1)],1)},r=[],s=(n("6b54"),n("96cf"),n("3b8d")),a=n("db72"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"dndList"},[n("div",{staticClass:"dndList-list",style:{width:t.width1}},[n("draggable",{staticClass:"dragArea",attrs:{"set-data":t.setData,list:t.list1,group:"article"}},[t._l(t.list1,(function(e,i){return n("div",{key:e.id,staticClass:"list-complete-item"},[n("div",{staticClass:"list-complete-item-handle"},[t._v("\n          "+t._s(++i)+".- "+t._s(e.fullname)+"\n        ")]),t._v(" "),n("div",{staticStyle:{position:"absolute",right:"0px"}},[n("span",{staticStyle:{float:"right","margin-top":"-20px","margin-right":"5px"},on:{click:function(n){return t.deleteEle(e)}}},[n("i",{staticClass:"el-icon-delete",staticStyle:{color:"#ff4949"}})])])])})),t._v(" "),t.list1.length?t._e():n("aside",[t._v("No data")])],2),t._v(" "),n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{icon:"el-icon-circle-check-outline",size:"small",type:"success"},on:{click:function(e){return t.saveAuthors()}}},[t._v("Save authors")]),t._v(" "),n("el-button",{attrs:{icon:"el-icon-refresh",size:"small",type:"primary"},on:{click:function(e){return t.sort()}}},[t._v("Reset order")])],1)])},l=[],u=(n("ac4d"),n("8a81"),n("5df3"),n("ac6a"),n("55dd"),n("1980")),c=n.n(u),d=n("780a");function h(t){return Object(d["a"])({url:"/authors/",method:"POST",data:t})}function f(t){return Object(d["a"])({url:"/authors/".concat(t.id,"/"),method:"PATCH",data:t})}function p(t,e){return Object(d["a"])({url:"/authors/".concat(t,"/"),method:"DELETE",data:e})}var m={name:"DndList",components:{draggable:c.a},props:{list1:{type:Array,default:function(){return[]}},list2:{type:Array,default:function(){return[]}},list1Title:{type:String,default:"list1"},list2Title:{type:String,default:"list2"},width1:{type:String,default:"100%"}},data:function(){return{loading:!1}},mounted:function(){this.sort()},methods:{sort:function(){var t=function(t,e){return t.position>e.position?1:-1};this.list1.sort(t)},isNotInList1:function(t){return this.list1.every((function(e){return t.id!==e.id}))},isNotInList2:function(t){return this.list2.every((function(e){return t.id!==e.id}))},saveAuthors:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=[],this.loading=!0,this.list1.forEach((function(t,n,i){t.id&&e.push(f({id:t.id,position:++n}))})),Promise.all(e).then((function(t){n.$notify({title:"Updated",dangerouslyUseHTMLString:!0,message:"<b>Research Authors</b> was sucessfully saved",type:"success",duration:2e3}),n.loading=!1}));case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),deleteEle:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){var n,i,r,s,a,o,l,u=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=!0,i=!1,r=void 0,t.prev=3,s=this.list1[Symbol.iterator]();case 5:if(n=(a=s.next()).done){t.next=15;break}if(o=a.value,o.id!==e.id){t.next=12;break}return l=this.list1.indexOf(o),this.list1.splice(l,1),o.id&&p(o.id).then((function(t){u.$message({dangerouslyUseHTMLString:!0,message:"Author removed",type:"warning",showClose:!0,duration:2e3})})),t.abrupt("break",15);case 12:n=!0,t.next=5;break;case 15:t.next=21;break;case 17:t.prev=17,t.t0=t["catch"](3),i=!0,r=t.t0;case 21:t.prev=21,t.prev=22,n||null==s.return||s.return();case 24:if(t.prev=24,!i){t.next=27;break}throw r;case 27:return t.finish(24);case 28:return t.finish(21);case 29:this.isNotInList2(e)&&this.list2.unshift(e);case 30:case"end":return t.stop()}}),t,this,[[3,17,21,29],[22,,24,28]])})));function e(e){return t.apply(this,arguments)}return e}(),pushEle:function(t){var e=!0,n=!1,i=void 0;try{for(var r,s=this.list2[Symbol.iterator]();!(e=(r=s.next()).done);e=!0){var a=r.value;if(a.id===t.id){var o=this.list2.indexOf(a);this.list2.splice(o,1);break}}}catch(l){n=!0,i=l}finally{try{e||null==s.return||s.return()}finally{if(n)throw i}}this.isNotInList1(t)&&this.list1.push(t)},setData:function(t){t.setData("Text","")}}},v=m,g=(n("4d04"),n("2877")),b=Object(g["a"])(v,o,l,!1,null,"195c2ec2",null),y=b.exports,w=n("8194"),k=n("2f62"),x={name:"DndListDemo",components:{DndList:y},props:{title:{type:String,default:"list1"},authors:{type:Array,default:function(){return[]}}},data:function(){return{list1:[],list2:[],options:[],loading:!1,author:""}},created:function(){this.getData()},computed:Object(a["a"])({},Object(k["c"])("members",["collaborators"])),methods:{getData:function(t){var e=this;this.loading=!0,Object(w["c"])({fullname:t}).then((function(t){e.options=t.results,e.loading=!1}))},addAuthor:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,n,i,r,s,a,o,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.author.toString().trim()){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,Object(w["b"])(this.author);case 4:if(e=t.sent,n=e.fullname,i=e.id,r=this.$route.params.id,s=this.authors.filter((function(t){return t.fullname==n})),s.length){t.next=16;break}return a={fullname:n,member:i,research:r,position:this.authors.length+1},t.next=12,h(a);case 12:o=t.sent,l=Object.assign({},a,o),this.authors.push(l),this.$message({dangerouslyUseHTMLString:!0,message:"Author created",some:l,type:"success",showClose:!0,duration:2e3});case 16:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},_=x,O=Object(g["a"])(_,i,r,!1,null,null,null);e["default"]=O.exports},"4d04":function(t,e,n){"use strict";var i=n("9fba"),r=n.n(i);r.a},"9fba":function(t,e,n){}}]);