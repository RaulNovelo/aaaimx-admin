(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-97580e4e"],{"407f":function(e,t,s){"use strict";var o={data:function(){return{loading:!1,searching:!1}},methods:{loadingFullPage:function(){return this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"})}}},a=o,r=void 0,n={props:{namespace:{type:String,default:""},isEdit:{type:Boolean,default:!1}},mixins:[a],methods:{validateRequire:function(e,t,s){""===t?(r.$message({message:e.field+" is required",type:"error"}),s(new Error("Required field"))):s()},handleSave:function(e){this.$notify({title:" ".concat(this.isEdit?"Updated":"Created"),dangerouslyUseHTMLString:!0,message:e,type:"success",duration:2e3})},handleError:function(){this.$message({message:"Something went wrong:( Try again",type:"error"})},handleDelete:function(){this.$message({dangerouslyUseHTMLString:!0,message:"".concat(this.namespace," was sucessfully deleted"),type:"success",showClose:!0,duration:2e3})},validateUrl:function(e,t,s){t?validURL(t)?s():(r.$message({message:"Invalid URL format",type:"error"}),s(new Error("Invalid URL"))):s()}}};t["a"]=n},"46b7":function(e,t,s){"use strict";var o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"createPost-container"},[s("el-form",{ref:"postForm",staticClass:"form-container",attrs:{model:e.postForm,rules:e.rules},on:{submit:function(e){return e.preventDefault(),(!1)(e)}}},[s("sticky",{attrs:{"z-index":10,"class-name":"sub-navbar "+e.postForm.active}},[s("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"margin-left":"10px"},attrs:{type:"success"},domProps:{textContent:e._s(e.isEdit?"Save changes":"Save")},on:{click:e.submitForm}}),e._v(" "),s("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"},{name:"show",rawName:"v-show",value:e.isEdit,expression:"isEdit"}],attrs:{type:"danger"},on:{click:e.deleteProject}},[e._v("Delete project")])],1),e._v(" "),s("div",{staticClass:"createPost-main-container"},[s("el-row",[s("el-col",{attrs:{span:24}},[s("div",{staticClass:"grid-content bg-purple-dark"})])],1),e._v(" "),s("el-row",[s("el-col",{attrs:{span:12}},[s("div",{staticClass:"grid-content bg-purple"})]),e._v(" "),s("el-col",{attrs:{span:12}},[s("div",{staticClass:"grid-content bg-purple-light"})])],1),e._v(" "),s("el-row",[s("el-col",{attrs:{span:24}},[s("div",{staticClass:"postInfo-container"},[s("el-row",[s("el-col",{attrs:{span:24,xs:24}},[s("el-form-item",{staticClass:"postInfo-container-item",attrs:{label:"Title:",prop:"title"}},[s("el-input",{attrs:{placeholder:"i.e: Segmentación de regiones basado en atributos de textura de datos bidimensionales...",type:"textarea",rows:"3"},model:{value:e.postForm.title,callback:function(t){e.$set(e.postForm,"title",t)},expression:"postForm.title"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:12,xs:24}},[s("el-form-item",{staticClass:"postInfo-container-item",attrs:{label:"Start date:",prop:"start"}},[s("br"),e._v(" "),s("el-date-picker",{attrs:{format:"MMM dd, yyyy","value-format":"yyyy-MM-dd",type:"date",placeholder:"Pick a day"},model:{value:e.postForm.start,callback:function(t){e.$set(e.postForm,"start",t)},expression:"postForm.start"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:12,xs:24}},[s("el-form-item",{staticClass:"postInfo-container-item",attrs:{label:"End date:",prop:"end"}},[s("br"),e._v(" "),s("el-date-picker",{attrs:{format:"MMM dd, yyyy","value-format":"yyyy-MM-dd",type:"date",placeholder:"Pick a day"},model:{value:e.postForm.end,callback:function(t){e.$set(e.postForm,"end",t)},expression:"postForm.end"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:12,xs:24}},[s("el-form-item",{staticClass:"postInfo-container-item",attrs:{label:"Institute:",prop:"institute"}},[s("br"),e._v(" "),s("el-select",{attrs:{filterable:"",clearable:"",placeholder:"Select institute"},model:{value:e.postForm.institute,callback:function(t){e.$set(e.postForm,"institute",t)},expression:"postForm.institute"}},e._l(e.partners,(function(t){return s("el-option",{key:t.uuid,attrs:{label:t.alias,value:t.uuid}},[s("small",{staticStyle:{color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.name))])])})),1)],1)],1),e._v(" "),s("el-col",{attrs:{span:12,xs:24}},[s("el-form-item",{staticClass:"postInfo-container-item",attrs:{label:"Responsable:",prop:"responsible"}},[s("br"),e._v(" "),s("el-select",{attrs:{remote:"",clearable:"",filterable:"","remote-method":e.fetchMember,placeholder:"Select responsible person"},model:{value:e.postForm.responsible,callback:function(t){e.$set(e.postForm,"responsible",t)},expression:"postForm.responsible"}},e._l(e.collaborators,(function(e){return s("el-option",{key:e.name,attrs:{label:e.name+" "+e.surname,value:e.name}})})),1),e._v(" "),s("MemberModal")],1)],1),e._v(" "),s("el-col",{attrs:{span:12,xs:24}},[s("el-form-item",{staticClass:"postInfo-container-item",attrs:{label:"Áreas de interés:",prop:"lines"}},[s("br"),e._v(" "),s("el-select",{attrs:{multiple:"",placeholder:"Select interest areas"},model:{value:e.postForm.lines,callback:function(t){e.$set(e.postForm,"lines",t)},expression:"postForm.lines"}},e._l(e.lines,(function(t){return s("el-option",{key:t.id,attrs:{label:t.topic.slice(0,30).concat("..."),value:t.id}},[e._v(e._s(t.topic))])})),1),e._v(" "),s("LineModal")],1)],1),e._v(" "),s("el-col",{attrs:{span:12,xs:24}},[s("el-form-item",{staticClass:"postInfo-container-item",attrs:{label:"Collaborators:",prop:"collaborators"}},[s("br"),e._v(" "),s("el-select",{attrs:{remote:"",multiple:"",filterable:"","remote-method":e.fetchMember,placeholder:"Select collaborators"},model:{value:e.postForm.collaborators,callback:function(t){e.$set(e.postForm,"collaborators",t)},expression:"postForm.collaborators"}},e._l(e.collaborators,(function(e){return s("el-option",{key:e.id,attrs:{label:e.name+" "+e.surname,value:e.id}})})),1),e._v(" "),s("MemberModal")],1)],1)],1)],1)])],1)],1)],1)],1)},a=[],r=(s("5df3"),s("ac6a"),s("db72")),n=s("2f62"),l=s("24d2"),i=s("8194"),c=s("407f"),u={title:"",start:"",end:"",in_charge:"",institute:"",collaborators:[],lines:[]},d={name:"ProjectDetail",mixins:[c["a"]],components:{MDinput:function(){return s.e("chunk-6790f463").then(s.bind(null,"1aba"))},LineModal:function(){return s.e("chunk-2d0e13f0").then(s.bind(null,"7a2b"))},MemberModal:function(){return s.e("chunk-42601475").then(s.bind(null,"dbfb"))},Sticky:function(){return s.e("chunk-2d210590").then(s.bind(null,"b804"))}},data:function(){return{loading:!1,rules:rules,tempRoute:{},id:null,collaborators:[]}},computed:Object(r["a"])({},Object(n["c"])("members",["partners"]),{},Object(n["c"])("projects",["postForm","lines"])),created:function(){this.lines.length||this.$store.dispatch("projects/fetchLines"),this.partners.length||this.$store.dispatch("members/fetchPartners"),this.isEdit?(this.id=this.$route.params&&this.$route.params.id,this.fetchData(this.id)):this.$store.commit("projects/SET_PROJECT",u),this.tempRoute=Object.assign({},this.$route)},methods:{fetchMember:function(e){var t=this;Object(i["c"])({name:e}).then((function(e){t.collaborators=e.results}))},fetchData:function(e){var t=this,s=this.loadingFullPage();Object(l["e"])(e).then((function(e){var o=[];e.collaborators.forEach((function(e){o.push(Object(i["b"])(e))})),Promise.all(o).then((function(e){t.collaborators=e,s.close()})),t.$store.commit("projects/SET_PROJECT",e)})).catch((function(e){s.close(),console.log(e)}))},submitForm:function(){var e=this;this.$refs.postForm.validate((function(t){if(!t)return console.log("error submit!!"),!1;var s;e.loading=!0,s=e.isEdit?Object(l["f"])(e.postForm):Object(l["a"])(e.postForm),s.then((function(t){e.handleSave("".concat(e.namespace," <b>").concat(e.postForm.title,"</b> was sucessfully saved")),console.log(t),e.loading=!1,e.$router.push("/projects/"+t.uuid)})).catch((function(t){e.loading=!1,console.log(t),e.handleError()}))}))},deleteProject:function(){this.handleError(),this.postForm.active=!1}}},p=d,m=s("2877"),b=Object(m["a"])(p,o,a,!1,null,null,null);t["a"]=b.exports},f88e:function(e,t,s){"use strict";s.r(t);var o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Detail",{attrs:{"is-edit":!0,namespace:"Project"}})},a=[],r=s("46b7"),n={name:"EditForm",components:{Detail:r["a"]}},l=n,i=s("2877"),c=Object(i["a"])(l,o,a,!1,null,null,null);t["default"]=c.exports}}]);